(function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e['default']}:function(){return e};return t.d(a,'a',a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p='',t(t.s=0)})([function(e,t,a){'use strict';function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}Object.defineProperty(t,'__esModule',{value:!0}),t.webSocketServer=void 0;var n=a(2),d=function(e){return e&&e.__esModule?e:{default:e}}(n),s=a(7),o=r(s),i=a(8),p=r(i),c=a(9),y=a(19),l=a(6);let m=t.webSocketServer=void 0,u=l.DEFAULT_SETTINGS;if('win32'!==process.env.TARGET_ENV)try{u=JSON.parse(o.readFileSync(p.join(__dirname,'../settings.json'),{encoding:'utf8'}))}catch(e){console.info('Failed to find or parse settings.json file. Using default settings instead.')}const g=async()=>{try{const e=(await d.default.get('http://freegeoip.net/json/',{responseType:'json'})).data;return{ip:e.ip,country:e.country_name,countryCode:e.country_code,latitude:e.latitude,longitude:e.longitude}}catch(e){console.warn('It looks like you are offline. The server will be starting in offline mode')}};(async()=>{let e=await g();if(t.webSocketServer=m=new c.WebSocketServer(u,e),u.enableWebHook&&e){if(!u.apiKey)throw new Error('You must set an apiKey, if you want to be listed on the server list. Either add an apiKey or disable web hook.');new y.WebHook(u,e)}const a=()=>{m.broadcastData()};setInterval(a,32)})(),process.on('uncaughtException',(e)=>{console.warn(`An unexpected error occured and the server is performing an automatic restart. Please report this issue:\n\n${e}`),process.exit(1)})},function(e,t,a){'use strict';var r=a(5),n=r.Reader,d=r.Writer,s=r.util,o=r.roots['default']||(r.roots['default']={});o.ServerClientMessage=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}e.prototype.compression=0,e.prototype.uncompressedSize=0,e.prototype.compressedData=s.newBuffer([]),e.prototype.data=null;var t;return Object.defineProperty(e.prototype,'message',{get:s.oneOfGetter(t=['compressedData','data']),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.compression&&e.hasOwnProperty('compression')&&t.uint32(8).int32(e.compression),null!=e.uncompressedSize&&e.hasOwnProperty('uncompressedSize')&&t.uint32(16).uint32(e.uncompressedSize),null!=e.compressedData&&e.hasOwnProperty('compressedData')&&t.uint32(26).bytes(e.compressedData),null!=e.data&&e.hasOwnProperty('data')&&o.ServerClient.encode(e.data,t.uint32(34).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ServerClientMessage,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.compression=e.int32();break;case 2:r.uncompressedSize=e.uint32();break;case 3:r.compressedData=e.bytes();break;case 4:r.data=o.ServerClient.decode(e,e.uint32());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';var t={};if(null!=e.compression&&e.hasOwnProperty('compression'))switch(e.compression){default:return'compression: enum value expected';case 0:case 1:case 2:}if(null!=e.uncompressedSize&&e.hasOwnProperty('uncompressedSize')&&!s.isInteger(e.uncompressedSize))return'uncompressedSize: integer expected';if(null!=e.compressedData&&e.hasOwnProperty('compressedData')&&(t.message=1,!(e.compressedData&&'number'==typeof e.compressedData.length||s.isString(e.compressedData))))return'compressedData: buffer expected';if(null!=e.data&&e.hasOwnProperty('data')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.ServerClient.verify(e.data);if(a)return'data.'+a}}return null},e.fromObject=function(e){if(e instanceof o.ServerClientMessage)return e;var t=new o.ServerClientMessage;switch(e.compression){case'NONE':case 0:t.compression=0;break;case'ZSTD':case 1:t.compression=1;break;case'GZIP':case 2:t.compression=2;}if(null!=e.uncompressedSize&&(t.uncompressedSize=e.uncompressedSize>>>0),null!=e.compressedData&&('string'==typeof e.compressedData?s.base64.decode(e.compressedData,t.compressedData=s.newBuffer(s.base64.length(e.compressedData)),0):e.compressedData.length&&(t.compressedData=e.compressedData)),null!=e.data){if('object'!=typeof e.data)throw TypeError('.ServerClientMessage.data: object expected');t.data=o.ServerClient.fromObject(e.data)}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.compression=t.enums===String?'NONE':0,a.uncompressedSize=0),null!=e.compression&&e.hasOwnProperty('compression')&&(a.compression=t.enums===String?o.Compression[e.compression]:e.compression),null!=e.uncompressedSize&&e.hasOwnProperty('uncompressedSize')&&(a.uncompressedSize=e.uncompressedSize),null!=e.compressedData&&e.hasOwnProperty('compressedData')&&(a.compressedData=t.bytes===String?s.base64.encode(e.compressedData,0,e.compressedData.length):t.bytes===Array?Array.prototype.slice.call(e.compressedData):e.compressedData,t.oneofs&&(a.message='compressedData')),null!=e.data&&e.hasOwnProperty('data')&&(a.data=o.ServerClient.toObject(e.data,t),t.oneofs&&(a.message='data')),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.ServerClient=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}e.prototype.messageType=0,e.prototype.handshake=null,e.prototype.ping=null,e.prototype.serverMessage=null,e.prototype.playerListUpdate=null,e.prototype.playerUpdate=null,e.prototype.playerData=null,e.prototype.metaData=null,e.prototype.chat=null;var t;return Object.defineProperty(e.prototype,'message',{get:s.oneOfGetter(t=['handshake','ping','serverMessage','playerListUpdate','playerUpdate','playerData','metaData','chat']),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.messageType&&e.hasOwnProperty('messageType')&&t.uint32(8).int32(e.messageType),null!=e.handshake&&e.hasOwnProperty('handshake')&&o.ServerHandshake.encode(e.handshake,t.uint32(18).fork()).ldelim(),null!=e.ping&&e.hasOwnProperty('ping')&&o.Ping.encode(e.ping,t.uint32(26).fork()).ldelim(),null!=e.serverMessage&&e.hasOwnProperty('serverMessage')&&o.ServerMessage.encode(e.serverMessage,t.uint32(34).fork()).ldelim(),null!=e.playerListUpdate&&e.hasOwnProperty('playerListUpdate')&&o.PlayerListUpdate.encode(e.playerListUpdate,t.uint32(42).fork()).ldelim(),null!=e.playerUpdate&&e.hasOwnProperty('playerUpdate')&&o.PlayerUpdate.encode(e.playerUpdate,t.uint32(50).fork()).ldelim(),null!=e.playerData&&e.hasOwnProperty('playerData')&&o.PlayerData.encode(e.playerData,t.uint32(1026).fork()).ldelim(),null!=e.metaData&&e.hasOwnProperty('metaData')&&o.MetaData.encode(e.metaData,t.uint32(1034).fork()).ldelim(),null!=e.chat&&e.hasOwnProperty('chat')&&o.Chat.encode(e.chat,t.uint32(1042).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ServerClient,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.messageType=e.int32();break;case 2:r.handshake=o.ServerHandshake.decode(e,e.uint32());break;case 3:r.ping=o.Ping.decode(e,e.uint32());break;case 4:r.serverMessage=o.ServerMessage.decode(e,e.uint32());break;case 5:r.playerListUpdate=o.PlayerListUpdate.decode(e,e.uint32());break;case 6:r.playerUpdate=o.PlayerUpdate.decode(e,e.uint32());break;case 128:r.playerData=o.PlayerData.decode(e,e.uint32());break;case 129:r.metaData=o.MetaData.decode(e,e.uint32());break;case 130:r.chat=o.Chat.decode(e,e.uint32());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';var t={};if(null!=e.messageType&&e.hasOwnProperty('messageType'))switch(e.messageType){default:return'messageType: enum value expected';case 0:case 2:case 3:case 4:case 5:case 6:case 128:case 129:case 130:}if(null!=e.handshake&&e.hasOwnProperty('handshake')){t.message=1;{var a=o.ServerHandshake.verify(e.handshake);if(a)return'handshake.'+a}}if(null!=e.ping&&e.hasOwnProperty('ping')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.Ping.verify(e.ping);if(a)return'ping.'+a}}if(null!=e.serverMessage&&e.hasOwnProperty('serverMessage')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.ServerMessage.verify(e.serverMessage);if(a)return'serverMessage.'+a}}if(null!=e.playerListUpdate&&e.hasOwnProperty('playerListUpdate')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.PlayerListUpdate.verify(e.playerListUpdate);if(a)return'playerListUpdate.'+a}}if(null!=e.playerUpdate&&e.hasOwnProperty('playerUpdate')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.PlayerUpdate.verify(e.playerUpdate);if(a)return'playerUpdate.'+a}}if(null!=e.playerData&&e.hasOwnProperty('playerData')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.PlayerData.verify(e.playerData);if(a)return'playerData.'+a}}if(null!=e.metaData&&e.hasOwnProperty('metaData')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.MetaData.verify(e.metaData);if(a)return'metaData.'+a}}if(null!=e.chat&&e.hasOwnProperty('chat')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.Chat.verify(e.chat);if(a)return'chat.'+a}}return null},e.fromObject=function(e){if(e instanceof o.ServerClient)return e;var t=new o.ServerClient;switch(e.messageType){case'UNKNOWN':case 0:t.messageType=0;break;case'HANDSHAKE':case 2:t.messageType=2;break;case'PING':case 3:t.messageType=3;break;case'SERVER_MESSAGE':case 4:t.messageType=4;break;case'PLAYER_LIST_UPDATE':case 5:t.messageType=5;break;case'PLAYER_UPDATE':case 6:t.messageType=6;break;case'PLAYER_DATA':case 128:t.messageType=128;break;case'META_DATA':case 129:t.messageType=129;break;case'CHAT':case 130:t.messageType=130;}if(null!=e.handshake){if('object'!=typeof e.handshake)throw TypeError('.ServerClient.handshake: object expected');t.handshake=o.ServerHandshake.fromObject(e.handshake)}if(null!=e.ping){if('object'!=typeof e.ping)throw TypeError('.ServerClient.ping: object expected');t.ping=o.Ping.fromObject(e.ping)}if(null!=e.serverMessage){if('object'!=typeof e.serverMessage)throw TypeError('.ServerClient.serverMessage: object expected');t.serverMessage=o.ServerMessage.fromObject(e.serverMessage)}if(null!=e.playerListUpdate){if('object'!=typeof e.playerListUpdate)throw TypeError('.ServerClient.playerListUpdate: object expected');t.playerListUpdate=o.PlayerListUpdate.fromObject(e.playerListUpdate)}if(null!=e.playerUpdate){if('object'!=typeof e.playerUpdate)throw TypeError('.ServerClient.playerUpdate: object expected');t.playerUpdate=o.PlayerUpdate.fromObject(e.playerUpdate)}if(null!=e.playerData){if('object'!=typeof e.playerData)throw TypeError('.ServerClient.playerData: object expected');t.playerData=o.PlayerData.fromObject(e.playerData)}if(null!=e.metaData){if('object'!=typeof e.metaData)throw TypeError('.ServerClient.metaData: object expected');t.metaData=o.MetaData.fromObject(e.metaData)}if(null!=e.chat){if('object'!=typeof e.chat)throw TypeError('.ServerClient.chat: object expected');t.chat=o.Chat.fromObject(e.chat)}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.messageType=t.enums===String?'UNKNOWN':0),null!=e.messageType&&e.hasOwnProperty('messageType')&&(a.messageType=t.enums===String?o.ServerClient.MessageType[e.messageType]:e.messageType),null!=e.handshake&&e.hasOwnProperty('handshake')&&(a.handshake=o.ServerHandshake.toObject(e.handshake,t),t.oneofs&&(a.message='handshake')),null!=e.ping&&e.hasOwnProperty('ping')&&(a.ping=o.Ping.toObject(e.ping,t),t.oneofs&&(a.message='ping')),null!=e.serverMessage&&e.hasOwnProperty('serverMessage')&&(a.serverMessage=o.ServerMessage.toObject(e.serverMessage,t),t.oneofs&&(a.message='serverMessage')),null!=e.playerListUpdate&&e.hasOwnProperty('playerListUpdate')&&(a.playerListUpdate=o.PlayerListUpdate.toObject(e.playerListUpdate,t),t.oneofs&&(a.message='playerListUpdate')),null!=e.playerUpdate&&e.hasOwnProperty('playerUpdate')&&(a.playerUpdate=o.PlayerUpdate.toObject(e.playerUpdate,t),t.oneofs&&(a.message='playerUpdate')),null!=e.playerData&&e.hasOwnProperty('playerData')&&(a.playerData=o.PlayerData.toObject(e.playerData,t),t.oneofs&&(a.message='playerData')),null!=e.metaData&&e.hasOwnProperty('metaData')&&(a.metaData=o.MetaData.toObject(e.metaData,t),t.oneofs&&(a.message='metaData')),null!=e.chat&&e.hasOwnProperty('chat')&&(a.chat=o.Chat.toObject(e.chat,t),t.oneofs&&(a.message='chat')),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.MessageType=function(){var e={},t=Object.create(e);return t[e[0]='UNKNOWN']=0,t[e[2]='HANDSHAKE']=2,t[e[3]='PING']=3,t[e[4]='SERVER_MESSAGE']=4,t[e[5]='PLAYER_LIST_UPDATE']=5,t[e[6]='PLAYER_UPDATE']=6,t[e[128]='PLAYER_DATA']=128,t[e[129]='META_DATA']=129,t[e[130]='CHAT']=130,t}(),e}(),o.ServerHandshake=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.playerId=0,e.prototype.ip='',e.prototype.port=0,e.prototype.domain='',e.prototype.name='',e.prototype.description='',e.prototype.playerList=null,e.prototype.countryCode='',e.prototype.gameMode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.playerId&&e.hasOwnProperty('playerId')&&t.uint32(8).uint32(e.playerId),null!=e.ip&&e.hasOwnProperty('ip')&&t.uint32(18).string(e.ip),null!=e.port&&e.hasOwnProperty('port')&&t.uint32(24).uint32(e.port),null!=e.domain&&e.hasOwnProperty('domain')&&t.uint32(34).string(e.domain),null!=e.name&&e.hasOwnProperty('name')&&t.uint32(42).string(e.name),null!=e.description&&e.hasOwnProperty('description')&&t.uint32(50).string(e.description),null!=e.playerList&&e.hasOwnProperty('playerList')&&o.PlayerListUpdate.encode(e.playerList,t.uint32(58).fork()).ldelim(),null!=e.countryCode&&e.hasOwnProperty('countryCode')&&t.uint32(66).string(e.countryCode),null!=e.gameMode&&e.hasOwnProperty('gameMode')&&t.uint32(72).int32(e.gameMode),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ServerHandshake,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.playerId=e.uint32();break;case 2:r.ip=e.string();break;case 3:r.port=e.uint32();break;case 4:r.domain=e.string();break;case 5:r.name=e.string();break;case 6:r.description=e.string();break;case 7:r.playerList=o.PlayerListUpdate.decode(e,e.uint32());break;case 8:r.countryCode=e.string();break;case 9:r.gameMode=e.int32();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.playerId&&e.hasOwnProperty('playerId')&&!s.isInteger(e.playerId))return'playerId: integer expected';if(null!=e.ip&&e.hasOwnProperty('ip')&&!s.isString(e.ip))return'ip: string expected';if(null!=e.port&&e.hasOwnProperty('port')&&!s.isInteger(e.port))return'port: integer expected';if(null!=e.domain&&e.hasOwnProperty('domain')&&!s.isString(e.domain))return'domain: string expected';if(null!=e.name&&e.hasOwnProperty('name')&&!s.isString(e.name))return'name: string expected';if(null!=e.description&&e.hasOwnProperty('description')&&!s.isString(e.description))return'description: string expected';if(null!=e.playerList&&e.hasOwnProperty('playerList')){var t=o.PlayerListUpdate.verify(e.playerList);if(t)return'playerList.'+t}if(null!=e.countryCode&&e.hasOwnProperty('countryCode')&&!s.isString(e.countryCode))return'countryCode: string expected';if(null!=e.gameMode&&e.hasOwnProperty('gameMode'))switch(e.gameMode){default:return'gameMode: enum value expected';case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 8:}return null},e.fromObject=function(e){if(e instanceof o.ServerHandshake)return e;var t=new o.ServerHandshake;if(null!=e.playerId&&(t.playerId=e.playerId>>>0),null!=e.ip&&(t.ip=e.ip+''),null!=e.port&&(t.port=e.port>>>0),null!=e.domain&&(t.domain=e.domain+''),null!=e.name&&(t.name=e.name+''),null!=e.description&&(t.description=e.description+''),null!=e.playerList){if('object'!=typeof e.playerList)throw TypeError('.ServerHandshake.playerList: object expected');t.playerList=o.PlayerListUpdate.fromObject(e.playerList)}switch(null!=e.countryCode&&(t.countryCode=e.countryCode+''),e.gameMode){case'NONE':case 0:t.gameMode=0;break;case'DEFAULT':case 1:t.gameMode=1;break;case'THIRD_PERSON_SHOOTER':case 2:t.gameMode=2;break;case'INTERACTIONLESS':case 3:t.gameMode=3;break;case'PROP_HUNT':case 4:t.gameMode=4;break;case'BOSS_RUSH':case 5:t.gameMode=5;break;case'TAG':case 6:t.gameMode=6;break;case'WARIO_WARE':case 8:t.gameMode=8;}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.playerId=0,a.ip='',a.port=0,a.domain='',a.name='',a.description='',a.playerList=null,a.countryCode='',a.gameMode=t.enums===String?'NONE':0),null!=e.playerId&&e.hasOwnProperty('playerId')&&(a.playerId=e.playerId),null!=e.ip&&e.hasOwnProperty('ip')&&(a.ip=e.ip),null!=e.port&&e.hasOwnProperty('port')&&(a.port=e.port),null!=e.domain&&e.hasOwnProperty('domain')&&(a.domain=e.domain),null!=e.name&&e.hasOwnProperty('name')&&(a.name=e.name),null!=e.description&&e.hasOwnProperty('description')&&(a.description=e.description),null!=e.playerList&&e.hasOwnProperty('playerList')&&(a.playerList=o.PlayerListUpdate.toObject(e.playerList,t)),null!=e.countryCode&&e.hasOwnProperty('countryCode')&&(a.countryCode=e.countryCode),null!=e.gameMode&&e.hasOwnProperty('gameMode')&&(a.gameMode=t.enums===String?o.GameModeType[e.gameMode]:e.gameMode),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.GameMode=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.gameMode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.gameMode&&e.hasOwnProperty('gameMode')&&t.uint32(8).int32(e.gameMode),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.GameMode,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.gameMode=e.int32();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.gameMode&&e.hasOwnProperty('gameMode'))switch(e.gameMode){default:return'gameMode: enum value expected';case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 8:}return null},e.fromObject=function(e){if(e instanceof o.GameMode)return e;var t=new o.GameMode;switch(e.gameMode){case'NONE':case 0:t.gameMode=0;break;case'DEFAULT':case 1:t.gameMode=1;break;case'THIRD_PERSON_SHOOTER':case 2:t.gameMode=2;break;case'INTERACTIONLESS':case 3:t.gameMode=3;break;case'PROP_HUNT':case 4:t.gameMode=4;break;case'BOSS_RUSH':case 5:t.gameMode=5;break;case'TAG':case 6:t.gameMode=6;break;case'WARIO_WARE':case 8:t.gameMode=8;}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.gameMode=t.enums===String?'NONE':0),null!=e.gameMode&&e.hasOwnProperty('gameMode')&&(a.gameMode=t.enums===String?o.GameModeType[e.gameMode]:e.gameMode),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.GameModeType=function(){var e={},t=Object.create(e);return t[e[0]='NONE']=0,t[e[1]='DEFAULT']=1,t[e[2]='THIRD_PERSON_SHOOTER']=2,t[e[3]='INTERACTIONLESS']=3,t[e[4]='PROP_HUNT']=4,t[e[5]='BOSS_RUSH']=5,t[e[6]='TAG']=6,t[e[8]='WARIO_WARE']=8,t}(),o.PlayerUpdate=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.playerId=0,e.prototype.player=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.playerId&&e.hasOwnProperty('playerId')&&t.uint32(8).uint32(e.playerId),null!=e.player&&e.hasOwnProperty('player')&&o.Player.encode(e.player,t.uint32(18).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.PlayerUpdate,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.playerId=e.uint32();break;case 2:r.player=o.Player.decode(e,e.uint32());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.playerId&&e.hasOwnProperty('playerId')&&!s.isInteger(e.playerId))return'playerId: integer expected';if(null!=e.player&&e.hasOwnProperty('player')){var t=o.Player.verify(e.player);if(t)return'player.'+t}return null},e.fromObject=function(e){if(e instanceof o.PlayerUpdate)return e;var t=new o.PlayerUpdate;if(null!=e.playerId&&(t.playerId=e.playerId>>>0),null!=e.player){if('object'!=typeof e.player)throw TypeError('.PlayerUpdate.player: object expected');t.player=o.Player.fromObject(e.player)}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.playerId=0,a.player=null),null!=e.playerId&&e.hasOwnProperty('playerId')&&(a.playerId=e.playerId),null!=e.player&&e.hasOwnProperty('player')&&(a.player=o.Player.toObject(e.player,t)),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.PlayerListUpdate=function(){function e(e){if(this.playerUpdates=[],e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.playerUpdates=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=d.create()),null!=e.playerUpdates&&e.playerUpdates.length)for(var a=0;a<e.playerUpdates.length;++a)o.PlayerUpdate.encode(e.playerUpdates[a],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.PlayerListUpdate,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.playerUpdates&&r.playerUpdates.length||(r.playerUpdates=[]),r.playerUpdates.push(o.PlayerUpdate.decode(e,e.uint32()));break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.playerUpdates&&e.hasOwnProperty('playerUpdates')){if(!Array.isArray(e.playerUpdates))return'playerUpdates: array expected';for(var t=0,a;t<e.playerUpdates.length;++t)if(a=o.PlayerUpdate.verify(e.playerUpdates[t]),a)return'playerUpdates.'+a}return null},e.fromObject=function(e){if(e instanceof o.PlayerListUpdate)return e;var t=new o.PlayerListUpdate;if(e.playerUpdates){if(!Array.isArray(e.playerUpdates))throw TypeError('.PlayerListUpdate.playerUpdates: array expected');t.playerUpdates=[];for(var a=0;a<e.playerUpdates.length;++a){if('object'!=typeof e.playerUpdates[a])throw TypeError('.PlayerListUpdate.playerUpdates: object expected');t.playerUpdates[a]=o.PlayerUpdate.fromObject(e.playerUpdates[a])}}return t},e.toObject=function(e,t){t||(t={});var a={};if((t.arrays||t.defaults)&&(a.playerUpdates=[]),e.playerUpdates&&e.playerUpdates.length){a.playerUpdates=[];for(var r=0;r<e.playerUpdates.length;++r)a.playerUpdates[r]=o.PlayerUpdate.toObject(e.playerUpdates[r],t)}return a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Player=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.username='',e.prototype.characterId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.username&&e.hasOwnProperty('username')&&t.uint32(10).string(e.username),null!=e.characterId&&e.hasOwnProperty('characterId')&&t.uint32(16).uint32(e.characterId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.Player,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.username=e.string();break;case 2:r.characterId=e.uint32();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.username&&e.hasOwnProperty('username')&&!s.isString(e.username)?'username: string expected':null!=e.characterId&&e.hasOwnProperty('characterId')&&!s.isInteger(e.characterId)?'characterId: integer expected':null},e.fromObject=function(e){if(e instanceof o.Player)return e;var t=new o.Player;return null!=e.username&&(t.username=e.username+''),null!=e.characterId&&(t.characterId=e.characterId>>>0),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.username='',a.characterId=0),null!=e.username&&e.hasOwnProperty('username')&&(a.username=e.username),null!=e.characterId&&e.hasOwnProperty('characterId')&&(a.characterId=e.characterId),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.Ping,d;e.pos<a;)switch(d=e.uint32(),d>>>3){default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null},e.fromObject=function(e){return e instanceof o.Ping?e:new o.Ping},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.ServerMessage=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}e.prototype.messageType=0,e.prototype.connectionDenied=null,e.prototype.gameMode=null,e.prototype.playerReorder=null,e.prototype.error=null;var t;return Object.defineProperty(e.prototype,'message',{get:s.oneOfGetter(t=['connectionDenied','gameMode','playerReorder','error']),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.messageType&&e.hasOwnProperty('messageType')&&t.uint32(8).int32(e.messageType),null!=e.connectionDenied&&e.hasOwnProperty('connectionDenied')&&o.ConnectionDenied.encode(e.connectionDenied,t.uint32(18).fork()).ldelim(),null!=e.gameMode&&e.hasOwnProperty('gameMode')&&o.GameMode.encode(e.gameMode,t.uint32(26).fork()).ldelim(),null!=e.playerReorder&&e.hasOwnProperty('playerReorder')&&o.PlayerReorder.encode(e.playerReorder,t.uint32(34).fork()).ldelim(),null!=e.error&&e.hasOwnProperty('error')&&o.Error.encode(e.error,t.uint32(42).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ServerMessage,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.messageType=e.int32();break;case 2:r.connectionDenied=o.ConnectionDenied.decode(e,e.uint32());break;case 3:r.gameMode=o.GameMode.decode(e,e.uint32());break;case 4:r.playerReorder=o.PlayerReorder.decode(e,e.uint32());break;case 5:r.error=o.Error.decode(e,e.uint32());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';var t={};if(null!=e.messageType&&e.hasOwnProperty('messageType'))switch(e.messageType){default:return'messageType: enum value expected';case 0:case 1:case 2:case 3:}if(null!=e.connectionDenied&&e.hasOwnProperty('connectionDenied')){t.message=1;{var a=o.ConnectionDenied.verify(e.connectionDenied);if(a)return'connectionDenied.'+a}}if(null!=e.gameMode&&e.hasOwnProperty('gameMode')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.GameMode.verify(e.gameMode);if(a)return'gameMode.'+a}}if(null!=e.playerReorder&&e.hasOwnProperty('playerReorder')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.PlayerReorder.verify(e.playerReorder);if(a)return'playerReorder.'+a}}if(null!=e.error&&e.hasOwnProperty('error')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.Error.verify(e.error);if(a)return'error.'+a}}return null},e.fromObject=function(e){if(e instanceof o.ServerMessage)return e;var t=new o.ServerMessage;switch(e.messageType){case'CONNECTION_DENIED':case 0:t.messageType=0;break;case'GAME_MODE':case 1:t.messageType=1;break;case'PLAYER_REORDER':case 2:t.messageType=2;break;case'ERROR':case 3:t.messageType=3;}if(null!=e.connectionDenied){if('object'!=typeof e.connectionDenied)throw TypeError('.ServerMessage.connectionDenied: object expected');t.connectionDenied=o.ConnectionDenied.fromObject(e.connectionDenied)}if(null!=e.gameMode){if('object'!=typeof e.gameMode)throw TypeError('.ServerMessage.gameMode: object expected');t.gameMode=o.GameMode.fromObject(e.gameMode)}if(null!=e.playerReorder){if('object'!=typeof e.playerReorder)throw TypeError('.ServerMessage.playerReorder: object expected');t.playerReorder=o.PlayerReorder.fromObject(e.playerReorder)}if(null!=e.error){if('object'!=typeof e.error)throw TypeError('.ServerMessage.error: object expected');t.error=o.Error.fromObject(e.error)}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.messageType=t.enums===String?'CONNECTION_DENIED':0),null!=e.messageType&&e.hasOwnProperty('messageType')&&(a.messageType=t.enums===String?o.ServerMessage.MessageType[e.messageType]:e.messageType),null!=e.connectionDenied&&e.hasOwnProperty('connectionDenied')&&(a.connectionDenied=o.ConnectionDenied.toObject(e.connectionDenied,t),t.oneofs&&(a.message='connectionDenied')),null!=e.gameMode&&e.hasOwnProperty('gameMode')&&(a.gameMode=o.GameMode.toObject(e.gameMode,t),t.oneofs&&(a.message='gameMode')),null!=e.playerReorder&&e.hasOwnProperty('playerReorder')&&(a.playerReorder=o.PlayerReorder.toObject(e.playerReorder,t),t.oneofs&&(a.message='playerReorder')),null!=e.error&&e.hasOwnProperty('error')&&(a.error=o.Error.toObject(e.error,t),t.oneofs&&(a.message='error')),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.MessageType=function(){var e={},t=Object.create(e);return t[e[0]='CONNECTION_DENIED']=0,t[e[1]='GAME_MODE']=1,t[e[2]='PLAYER_REORDER']=2,t[e[3]='ERROR']=3,t}(),e}(),o.PlayerReorder=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.grantToken=!1,e.prototype.playerId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.grantToken&&e.hasOwnProperty('grantToken')&&t.uint32(8).bool(e.grantToken),null!=e.playerId&&e.hasOwnProperty('playerId')&&t.uint32(16).uint32(e.playerId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.PlayerReorder,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.grantToken=e.bool();break;case 2:r.playerId=e.uint32();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.grantToken&&e.hasOwnProperty('grantToken')&&'boolean'!=typeof e.grantToken?'grantToken: boolean expected':null!=e.playerId&&e.hasOwnProperty('playerId')&&!s.isInteger(e.playerId)?'playerId: integer expected':null},e.fromObject=function(e){if(e instanceof o.PlayerReorder)return e;var t=new o.PlayerReorder;return null!=e.grantToken&&(t.grantToken=!!e.grantToken),null!=e.playerId&&(t.playerId=e.playerId>>>0),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.grantToken=!1,a.playerId=0),null!=e.grantToken&&e.hasOwnProperty('grantToken')&&(a.grantToken=e.grantToken),null!=e.playerId&&e.hasOwnProperty('playerId')&&(a.playerId=e.playerId),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Error=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.errorType=0,e.prototype.message='',e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.errorType&&e.hasOwnProperty('errorType')&&t.uint32(8).int32(e.errorType),null!=e.message&&e.hasOwnProperty('message')&&t.uint32(18).string(e.message),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.Error,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.errorType=e.int32();break;case 2:r.message=e.string();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.errorType&&e.hasOwnProperty('errorType'))switch(e.errorType){default:return'errorType: enum value expected';case 0:case 400:case 401:case 429:case 500:}return null!=e.message&&e.hasOwnProperty('message')&&!s.isString(e.message)?'message: string expected':null},e.fromObject=function(e){if(e instanceof o.Error)return e;var t=new o.Error;switch(e.errorType){case'UNKNOWN':case 0:t.errorType=0;break;case'BAD_REQUEST':case 400:t.errorType=400;break;case'UNAUTHORIZED':case 401:t.errorType=401;break;case'TOO_MANY_REQUESTS':case 429:t.errorType=429;break;case'INTERNAL_SERVER_ERROR':case 500:t.errorType=500;}return null!=e.message&&(t.message=e.message+''),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.errorType=t.enums===String?'UNKNOWN':0,a.message=''),null!=e.errorType&&e.hasOwnProperty('errorType')&&(a.errorType=t.enums===String?o.Error.ErrorType[e.errorType]:e.errorType),null!=e.message&&e.hasOwnProperty('message')&&(a.message=e.message),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.ErrorType=function(){var e={},t=Object.create(e);return t[e[0]='UNKNOWN']=0,t[e[400]='BAD_REQUEST']=400,t[e[401]='UNAUTHORIZED']=401,t[e[429]='TOO_MANY_REQUESTS']=429,t[e[500]='INTERNAL_SERVER_ERROR']=500,t}(),e}(),o.ConnectionDenied=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}e.prototype.reason=0,e.prototype.serverFull=null,e.prototype.wrongVersion=null;var t;return Object.defineProperty(e.prototype,'message',{get:s.oneOfGetter(t=['serverFull','wrongVersion']),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.reason&&e.hasOwnProperty('reason')&&t.uint32(8).int32(e.reason),null!=e.serverFull&&e.hasOwnProperty('serverFull')&&o.ServerFull.encode(e.serverFull,t.uint32(18).fork()).ldelim(),null!=e.wrongVersion&&e.hasOwnProperty('wrongVersion')&&o.WrongVersion.encode(e.wrongVersion,t.uint32(26).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ConnectionDenied,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.reason=e.int32();break;case 2:r.serverFull=o.ServerFull.decode(e,e.uint32());break;case 3:r.wrongVersion=o.WrongVersion.decode(e,e.uint32());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';var t={};if(null!=e.reason&&e.hasOwnProperty('reason'))switch(e.reason){default:return'reason: enum value expected';case 0:case 1:}if(null!=e.serverFull&&e.hasOwnProperty('serverFull')){t.message=1;{var a=o.ServerFull.verify(e.serverFull);if(a)return'serverFull.'+a}}if(null!=e.wrongVersion&&e.hasOwnProperty('wrongVersion')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.WrongVersion.verify(e.wrongVersion);if(a)return'wrongVersion.'+a}}return null},e.fromObject=function(e){if(e instanceof o.ConnectionDenied)return e;var t=new o.ConnectionDenied;switch(e.reason){case'SERVER_FULL':case 0:t.reason=0;break;case'WRONG_VERSION':case 1:t.reason=1;}if(null!=e.serverFull){if('object'!=typeof e.serverFull)throw TypeError('.ConnectionDenied.serverFull: object expected');t.serverFull=o.ServerFull.fromObject(e.serverFull)}if(null!=e.wrongVersion){if('object'!=typeof e.wrongVersion)throw TypeError('.ConnectionDenied.wrongVersion: object expected');t.wrongVersion=o.WrongVersion.fromObject(e.wrongVersion)}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.reason=t.enums===String?'SERVER_FULL':0),null!=e.reason&&e.hasOwnProperty('reason')&&(a.reason=t.enums===String?o.ConnectionDenied.Reason[e.reason]:e.reason),null!=e.serverFull&&e.hasOwnProperty('serverFull')&&(a.serverFull=o.ServerFull.toObject(e.serverFull,t),t.oneofs&&(a.message='serverFull')),null!=e.wrongVersion&&e.hasOwnProperty('wrongVersion')&&(a.wrongVersion=o.WrongVersion.toObject(e.wrongVersion,t),t.oneofs&&(a.message='wrongVersion')),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.Reason=function(){var e={},t=Object.create(e);return t[e[0]='SERVER_FULL']=0,t[e[1]='WRONG_VERSION']=1,t}(),e}(),o.ServerFull=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.maxPlayers=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.maxPlayers&&e.hasOwnProperty('maxPlayers')&&t.uint32(8).uint32(e.maxPlayers),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ServerFull,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.maxPlayers=e.uint32();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.maxPlayers&&e.hasOwnProperty('maxPlayers')&&!s.isInteger(e.maxPlayers)?'maxPlayers: integer expected':null},e.fromObject=function(e){if(e instanceof o.ServerFull)return e;var t=new o.ServerFull;return null!=e.maxPlayers&&(t.maxPlayers=e.maxPlayers>>>0),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.maxPlayers=0),null!=e.maxPlayers&&e.hasOwnProperty('maxPlayers')&&(a.maxPlayers=e.maxPlayers),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.WrongVersion=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.majorVersion=0,e.prototype.minorVersion=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.majorVersion&&e.hasOwnProperty('majorVersion')&&t.uint32(8).uint32(e.majorVersion),null!=e.minorVersion&&e.hasOwnProperty('minorVersion')&&t.uint32(16).uint32(e.minorVersion),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.WrongVersion,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.majorVersion=e.uint32();break;case 2:r.minorVersion=e.uint32();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.majorVersion&&e.hasOwnProperty('majorVersion')&&!s.isInteger(e.majorVersion)?'majorVersion: integer expected':null!=e.minorVersion&&e.hasOwnProperty('minorVersion')&&!s.isInteger(e.minorVersion)?'minorVersion: integer expected':null},e.fromObject=function(e){if(e instanceof o.WrongVersion)return e;var t=new o.WrongVersion;return null!=e.majorVersion&&(t.majorVersion=e.majorVersion>>>0),null!=e.minorVersion&&(t.minorVersion=e.minorVersion>>>0),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.majorVersion=0,a.minorVersion=0),null!=e.majorVersion&&e.hasOwnProperty('majorVersion')&&(a.majorVersion=e.majorVersion),null!=e.minorVersion&&e.hasOwnProperty('minorVersion')&&(a.minorVersion=e.minorVersion),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.PlayerData=function(){function e(e){if(this.playerBytes=[],e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.dataLength=0,e.prototype.playerBytes=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=d.create()),null!=e.dataLength&&e.hasOwnProperty('dataLength')&&t.uint32(8).uint32(e.dataLength),null!=e.playerBytes&&e.playerBytes.length)for(var a=0;a<e.playerBytes.length;++a)o.PlayerBytes.encode(e.playerBytes[a],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.PlayerData,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.dataLength=e.uint32();break;case 2:r.playerBytes&&r.playerBytes.length||(r.playerBytes=[]),r.playerBytes.push(o.PlayerBytes.decode(e,e.uint32()));break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.dataLength&&e.hasOwnProperty('dataLength')&&!s.isInteger(e.dataLength))return'dataLength: integer expected';if(null!=e.playerBytes&&e.hasOwnProperty('playerBytes')){if(!Array.isArray(e.playerBytes))return'playerBytes: array expected';for(var t=0,a;t<e.playerBytes.length;++t)if(a=o.PlayerBytes.verify(e.playerBytes[t]),a)return'playerBytes.'+a}return null},e.fromObject=function(e){if(e instanceof o.PlayerData)return e;var t=new o.PlayerData;if(null!=e.dataLength&&(t.dataLength=e.dataLength>>>0),e.playerBytes){if(!Array.isArray(e.playerBytes))throw TypeError('.PlayerData.playerBytes: array expected');t.playerBytes=[];for(var a=0;a<e.playerBytes.length;++a){if('object'!=typeof e.playerBytes[a])throw TypeError('.PlayerData.playerBytes: object expected');t.playerBytes[a]=o.PlayerBytes.fromObject(e.playerBytes[a])}}return t},e.toObject=function(e,t){t||(t={});var a={};if((t.arrays||t.defaults)&&(a.playerBytes=[]),t.defaults&&(a.dataLength=0),null!=e.dataLength&&e.hasOwnProperty('dataLength')&&(a.dataLength=e.dataLength),e.playerBytes&&e.playerBytes.length){a.playerBytes=[];for(var r=0;r<e.playerBytes.length;++r)a.playerBytes[r]=o.PlayerBytes.toObject(e.playerBytes[r],t)}return a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.PlayerBytes=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.playerId=0,e.prototype.playerData=s.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.playerId&&e.hasOwnProperty('playerId')&&t.uint32(8).uint32(e.playerId),null!=e.playerData&&e.hasOwnProperty('playerData')&&t.uint32(18).bytes(e.playerData),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.PlayerBytes,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.playerId=e.uint32();break;case 2:r.playerData=e.bytes();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.playerId&&e.hasOwnProperty('playerId')&&!s.isInteger(e.playerId)?'playerId: integer expected':null!=e.playerData&&e.hasOwnProperty('playerData')&&!(e.playerData&&'number'==typeof e.playerData.length||s.isString(e.playerData))?'playerData: buffer expected':null},e.fromObject=function(e){if(e instanceof o.PlayerBytes)return e;var t=new o.PlayerBytes;return null!=e.playerId&&(t.playerId=e.playerId>>>0),null!=e.playerData&&('string'==typeof e.playerData?s.base64.decode(e.playerData,t.playerData=s.newBuffer(s.base64.length(e.playerData)),0):e.playerData.length&&(t.playerData=e.playerData)),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.playerId=0,a.playerData=t.bytes===String?'':[]),null!=e.playerId&&e.hasOwnProperty('playerId')&&(a.playerId=e.playerId),null!=e.playerData&&e.hasOwnProperty('playerData')&&(a.playerData=t.bytes===String?s.base64.encode(e.playerData,0,e.playerData.length):t.bytes===Array?Array.prototype.slice.call(e.playerData):e.playerData),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Meta=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.length=0,e.prototype.address=0,e.prototype.data=s.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.length&&e.hasOwnProperty('length')&&t.uint32(8).uint32(e.length),null!=e.address&&e.hasOwnProperty('address')&&t.uint32(16).uint32(e.address),null!=e.data&&e.hasOwnProperty('data')&&t.uint32(26).bytes(e.data),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.Meta,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.length=e.uint32();break;case 2:r.address=e.uint32();break;case 3:r.data=e.bytes();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.length&&e.hasOwnProperty('length')&&!s.isInteger(e.length)?'length: integer expected':null!=e.address&&e.hasOwnProperty('address')&&!s.isInteger(e.address)?'address: integer expected':null!=e.data&&e.hasOwnProperty('data')&&!(e.data&&'number'==typeof e.data.length||s.isString(e.data))?'data: buffer expected':null},e.fromObject=function(e){if(e instanceof o.Meta)return e;var t=new o.Meta;return null!=e.length&&(t.length=e.length>>>0),null!=e.address&&(t.address=e.address>>>0),null!=e.data&&('string'==typeof e.data?s.base64.decode(e.data,t.data=s.newBuffer(s.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.length=0,a.address=0,a.data=t.bytes===String?'':[]),null!=e.length&&e.hasOwnProperty('length')&&(a.length=e.length),null!=e.address&&e.hasOwnProperty('address')&&(a.address=e.address),null!=e.data&&e.hasOwnProperty('data')&&(a.data=t.bytes===String?s.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.MetaData=function(){function e(e){if(this.metaData=[],e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.metaData=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=d.create()),null!=e.metaData&&e.metaData.length)for(var a=0;a<e.metaData.length;++a)o.Meta.encode(e.metaData[a],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.MetaData,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.metaData&&r.metaData.length||(r.metaData=[]),r.metaData.push(o.Meta.decode(e,e.uint32()));break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.metaData&&e.hasOwnProperty('metaData')){if(!Array.isArray(e.metaData))return'metaData: array expected';for(var t=0,a;t<e.metaData.length;++t)if(a=o.Meta.verify(e.metaData[t]),a)return'metaData.'+a}return null},e.fromObject=function(e){if(e instanceof o.MetaData)return e;var t=new o.MetaData;if(e.metaData){if(!Array.isArray(e.metaData))throw TypeError('.MetaData.metaData: array expected');t.metaData=[];for(var a=0;a<e.metaData.length;++a){if('object'!=typeof e.metaData[a])throw TypeError('.MetaData.metaData: object expected');t.metaData[a]=o.Meta.fromObject(e.metaData[a])}}return t},e.toObject=function(e,t){t||(t={});var a={};if((t.arrays||t.defaults)&&(a.metaData=[]),e.metaData&&e.metaData.length){a.metaData=[];for(var r=0;r<e.metaData.length;++r)a.metaData[r]=o.Meta.toObject(e.metaData[r],t)}return a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Chat=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}e.prototype.chatType=0,e.prototype.senderId=0,e.prototype.message='',e.prototype.global=null,e.prototype['private']=null,e.prototype.command=null;var t;return Object.defineProperty(e.prototype,'messageType',{get:s.oneOfGetter(t=['global','private','command']),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.chatType&&e.hasOwnProperty('chatType')&&t.uint32(8).int32(e.chatType),null!=e.senderId&&e.hasOwnProperty('senderId')&&t.uint32(16).uint32(e.senderId),null!=e.message&&e.hasOwnProperty('message')&&t.uint32(26).string(e.message),null!=e.global&&e.hasOwnProperty('global')&&o.ChatGlobal.encode(e.global,t.uint32(34).fork()).ldelim(),null!=e['private']&&e.hasOwnProperty('private')&&o.ChatPrivate.encode(e['private'],t.uint32(42).fork()).ldelim(),null!=e.command&&e.hasOwnProperty('command')&&o.ChatCommand.encode(e.command,t.uint32(2042).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.Chat,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.chatType=e.int32();break;case 2:r.senderId=e.uint32();break;case 3:r.message=e.string();break;case 4:r.global=o.ChatGlobal.decode(e,e.uint32());break;case 5:r['private']=o.ChatPrivate.decode(e,e.uint32());break;case 255:r.command=o.ChatCommand.decode(e,e.uint32());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';var t={};if(null!=e.chatType&&e.hasOwnProperty('chatType'))switch(e.chatType){default:return'chatType: enum value expected';case 0:case 1:case 255:}if(null!=e.senderId&&e.hasOwnProperty('senderId')&&!s.isInteger(e.senderId))return'senderId: integer expected';if(null!=e.message&&e.hasOwnProperty('message')&&!s.isString(e.message))return'message: string expected';if(null!=e.global&&e.hasOwnProperty('global')){t.messageType=1;{var a=o.ChatGlobal.verify(e.global);if(a)return'global.'+a}}if(null!=e['private']&&e.hasOwnProperty('private')){if(1===t.messageType)return'messageType: multiple values';t.messageType=1;{var a=o.ChatPrivate.verify(e['private']);if(a)return'private.'+a}}if(null!=e.command&&e.hasOwnProperty('command')){if(1===t.messageType)return'messageType: multiple values';t.messageType=1;{var a=o.ChatCommand.verify(e.command);if(a)return'command.'+a}}return null},e.fromObject=function(e){if(e instanceof o.Chat)return e;var t=new o.Chat;switch(e.chatType){case'GLOBAL':case 0:t.chatType=0;break;case'PRIVATE':case 1:t.chatType=1;break;case'COMMAND':case 255:t.chatType=255;}if(null!=e.senderId&&(t.senderId=e.senderId>>>0),null!=e.message&&(t.message=e.message+''),null!=e.global){if('object'!=typeof e.global)throw TypeError('.Chat.global: object expected');t.global=o.ChatGlobal.fromObject(e.global)}if(null!=e['private']){if('object'!=typeof e['private'])throw TypeError('.Chat.private: object expected');t['private']=o.ChatPrivate.fromObject(e['private'])}if(null!=e.command){if('object'!=typeof e.command)throw TypeError('.Chat.command: object expected');t.command=o.ChatCommand.fromObject(e.command)}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.chatType=t.enums===String?'GLOBAL':0,a.senderId=0,a.message=''),null!=e.chatType&&e.hasOwnProperty('chatType')&&(a.chatType=t.enums===String?o.Chat.ChatType[e.chatType]:e.chatType),null!=e.senderId&&e.hasOwnProperty('senderId')&&(a.senderId=e.senderId),null!=e.message&&e.hasOwnProperty('message')&&(a.message=e.message),null!=e.global&&e.hasOwnProperty('global')&&(a.global=o.ChatGlobal.toObject(e.global,t),t.oneofs&&(a.messageType='global')),null!=e['private']&&e.hasOwnProperty('private')&&(a['private']=o.ChatPrivate.toObject(e['private'],t),t.oneofs&&(a.messageType='private')),null!=e.command&&e.hasOwnProperty('command')&&(a.command=o.ChatCommand.toObject(e.command,t),t.oneofs&&(a.messageType='command')),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.ChatType=function(){var e={},t=Object.create(e);return t[e[0]='GLOBAL']=0,t[e[1]='PRIVATE']=1,t[e[255]='COMMAND']=255,t}(),e}(),o.ChatGlobal=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ChatGlobal,d;e.pos<a;)switch(d=e.uint32(),d>>>3){default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null},e.fromObject=function(e){return e instanceof o.ChatGlobal?e:new o.ChatGlobal},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.ChatPrivate=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.receiverId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.receiverId&&e.hasOwnProperty('receiverId')&&t.uint32(8).uint32(e.receiverId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ChatPrivate,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.receiverId=e.uint32();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.receiverId&&e.hasOwnProperty('receiverId')&&!s.isInteger(e.receiverId)?'receiverId: integer expected':null},e.fromObject=function(e){if(e instanceof o.ChatPrivate)return e;var t=new o.ChatPrivate;return null!=e.receiverId&&(t.receiverId=e.receiverId>>>0),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.receiverId=0),null!=e.receiverId&&e.hasOwnProperty('receiverId')&&(a.receiverId=e.receiverId),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.ChatCommand=function(){function e(e){if(this.arguments=[],e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.arguments=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=d.create()),null!=e.arguments&&e.arguments.length)for(var a=0;a<e.arguments.length;++a)t.uint32(10).string(e.arguments[a]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ChatCommand,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.arguments&&r.arguments.length||(r.arguments=[]),r.arguments.push(e.string());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.arguments&&e.hasOwnProperty('arguments')){if(!Array.isArray(e.arguments))return'arguments: array expected';for(var t=0;t<e.arguments.length;++t)if(!s.isString(e.arguments[t]))return'arguments: string[] expected'}return null},e.fromObject=function(e){if(e instanceof o.ChatCommand)return e;var t=new o.ChatCommand;if(e.arguments){if(!Array.isArray(e.arguments))throw TypeError('.ChatCommand.arguments: array expected');t.arguments=[];for(var a=0;a<e.arguments.length;++a)t.arguments[a]=e.arguments[a]+''}return t},e.toObject=function(e,t){t||(t={});var a={};if((t.arrays||t.defaults)&&(a.arguments=[]),e.arguments&&e.arguments.length){a.arguments=[];for(var r=0;r<e.arguments.length;++r)a.arguments[r]=e.arguments[r]}return a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Compression=function(){var e={},t=Object.create(e);return t[e[0]='NONE']=0,t[e[1]='ZSTD']=1,t[e[2]='GZIP']=2,t}(),e.exports=o},function(e){e.exports=require('axios')},function(e){e.exports=require('zlib')},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});class a extends Error{constructor(e,t){super(e),this.message=e,this.errorType=t,Object.setPrototypeOf(this,a)}}t.ConnectionError=a},function(e){e.exports=require('protobufjs/minimal')},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});const a=t.DEFAULT_SETTINGS={port:3678,gamemode:1,enableGamemodeVote:!0,name:'A Net64+ Server',domain:'',description:'The **best** Net64+ server ever\n\n:unicorn_face:',enableWebHook:!1,apiKey:''},r=t.TIME_UNTIL_META_RESEND=1e4},function(e){e.exports=require('fs')},function(e){e.exports=require('path')},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.WebSocketServer=t.PLAYER_DATA_COMPRESSION_THRESHOLD=void 0;var r=a(3),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(r),d=a(10),s=a(14),o=a(16),i=a(4),p=a(1);let c='win32'===process.env.TARGET_ENV?a(!function(){var t=new Error('Cannot find module "../compile/uws"');throw t.code='MODULE_NOT_FOUND',t}()).Server:a(18).Server;const y=t.PLAYER_DATA_COMPRESSION_THRESHOLD=3;t.WebSocketServer=class{constructor({port:e,gamemode:t,enableGamemodeVote:a,name:r,domain:n,description:d},i){this.clients=[],this.players=[],this.metaData=new s.MetaData,this.isOffline=!i,this.gameMode=t,this.ip=i?i.ip:'',this.port=e,this.name=r,this.domain=n,this.description=d,this.countryCode=i?i.countryCode:'LAN',this.command=new o.Command(a),this.onConnection=this.onConnection.bind(this),this.server=new c({port:this.port},()=>{console.info(`\nNet64+ ${'2.0.0'} server successfully started!\nAccepting connections on Port ${this.port}`),'win32'===process.env.TARGET_ENV&&(console.info('Connect locally via direct connect 127.0.0.1\nTo accept external connections, your Port must be forwarded.\nTo join via LAN, others must use your LAN IP address: win + "cmd" > ipconfig > IPv4 Address or via Hamachi network and IP'),console.info('\nThis is a precompiled version of the Net64+ server. It has the limitation, that it cannot be displayed on the public server list. It is only meant to be used for user servers!\n'))}),this.server.on('connection',this.onConnection),this.metaData=new s.MetaData,this.clients=[],this.players=[]}addPlayer(e){const t=e.client.id;this.players[t]=e,this.playerWithToken||this.grantNewServerToken(e),this.broadcastPlayerListMessage()}removePlayer(e){delete this.clients[e];const t=this.players[e];let a=!1;t===this.playerWithToken&&(delete this.playerWithToken,a=!0),delete this.players[e],a&&this.grantNewServerToken(),this.broadcastPlayerListMessage()}broadcastPlayerListMessage(){const e={compression:p.Compression.NONE,data:{messageType:p.ServerClient.MessageType.PLAYER_LIST_UPDATE,playerListUpdate:{playerUpdates:this.generatePlayerUpdates()}}},t=p.ServerClientMessage.encode(p.ServerClientMessage.fromObject(e)).finish();this.broadcastMessage(t)}generatePlayerUpdates(){return this.players.filter((e)=>e).map((e)=>({player:{username:e.username,characterId:e.characterId},playerId:e.client.id}))}sendHandshake(e){const t={compression:p.Compression.NONE,data:{messageType:p.ServerClient.MessageType.HANDSHAKE,handshake:{playerId:e.id,ip:this.ip,port:this.port,domain:this.domain,name:this.name,description:this.description,countryCode:this.countryCode,gameMode:this.gameMode,playerList:{playerUpdates:this.generatePlayerUpdates()}}}},a=p.ServerClientMessage.encode(p.ServerClientMessage.fromObject(t)).finish();e.sendMessage(a)}reorderPlayers(){const e=[],t=[];let a=1;for(let r in this.clients)this.clients[r]&&(e[a]=this.clients[r],e[a].id=a,t[a++]=this.players[r]);this.clients=e,this.players=t;for(let e=2;e<this.clients.length;e++)this.clients[e].sendPlayerReorder(e)}broadcastMessage(e){for(const t in this.players){const a=this.players[t];a.client.sendMessage(e)}}async broadcastData(){const e=await this.getPlayerData(),t=this.getMetaData();for(const t in this.players){const a=this.players[t];a.client.sendMessage(e)}if(t)for(const e in this.players){const a=this.players[e];a.client.sendMessage(t)}}async getPlayerData(){const e=this.players.filter((e)=>e&&0!==e.playerData[3]),t={messageType:p.ServerClient.MessageType.PLAYER_DATA,playerData:{dataLength:28,playerBytes:e.map((e)=>({playerId:e.client.id,playerData:e.playerData}))}},a=e.length>=y?{compression:p.Compression.GZIP,compressedData:await this.getCompressedPlayerData(t)}:{compression:p.Compression.NONE,data:t};return p.ServerClientMessage.encode(p.ServerClientMessage.fromObject(a)).finish()}getCompressedPlayerData(e){const t=p.ServerClient.encode(p.ServerClient.fromObject(e)).finish();return new Promise((e,a)=>{n.gzip(t,(t,r)=>{t&&a(t),e(r)})})}getMetaData(){const e=this.metaData.getMetaData();if(0!==e.length){const t={compression:p.Compression.NONE,data:{messageType:p.ServerClient.MessageType.PLAYER_DATA,metaData:{metaData:e}}};return p.ServerClientMessage.encode(p.ServerClientMessage.fromObject(t)).finish()}}addMeta(e){this.metaData.addIfNotAlreadySent(e)}onGlobalChatMessage(e,t){const a={compression:p.Compression.NONE,data:{messageType:p.ServerClient.MessageType.CHAT,chat:{chatType:p.Chat.ChatType.GLOBAL,message:t,senderId:e.id}}},r=p.ServerClientMessage.encode(p.ServerClientMessage.fromObject(a)).finish();for(const a in this.players){const e=this.players[a];e.client.sendMessage(r)}}onPrivateChatMessage(e,t,a){if(!this.clients[a])throw new i.ConnectionError(`You were trying to send a private chat message, but no client with id ${a} exists.`,p.Error.ErrorType.BAD_REQUEST);const r={compression:p.Compression.NONE,data:{messageType:p.ServerClient.MessageType.CHAT,chat:{chatType:p.Chat.ChatType.PRIVATE,message:t,senderId:e.id}}},n=p.ServerClientMessage.encode(p.ServerClientMessage.fromObject(r)).finish();this.clients[a].sendMessage(n)}onCommandChatMessage(e,t,a){'gamemode'===t?this.command.onGameModeCommand(e,a):this.onUnknownCommand(e)}onUnknownCommand(e){const t={compression:p.Compression.NONE,data:{messageType:p.ServerClient.MessageType.CHAT,chat:{chatType:p.Chat.ChatType.COMMAND,message:'Unknown command'}}},a=p.ServerClientMessage.encode(p.ServerClientMessage.fromObject(t)).finish();e.sendMessage(a)}grantNewServerToken(e){if(e)return void this.grantTokenToPlayer(e);for(let t=this.players.length;0<=t;t--)if(e=this.players[t],e)return this.grantTokenToPlayer(e),this.clients[1]=e.client,this.players[1]=e,this.clients[1].id=1,delete this.clients[t],void delete this.players[t]}grantTokenToPlayer(e){const t={compression:p.Compression.NONE,data:{messageType:p.ServerClient.MessageType.SERVER_MESSAGE,serverMessage:{messageType:p.ServerMessage.MessageType.PLAYER_REORDER,playerReorder:{playerId:1,grantToken:!0}}}},a=p.ServerClientMessage.encode(p.ServerClientMessage.fromObject(t)).finish();e.client.sendMessage(a),!1,this.playerWithToken=e}onConnection(e){const t=this.getNextClientId();if(null==t)return this.sendServerFullMessage(e),void 0;!1,this.clients[t]=new d.Client(t,e);const a=this.clients.filter((e)=>e).length;console.info(`Active users: ${a}/24`)}getNextClientId(){for(let e=1;25>e;e++)if(null==this.clients[e])return e;return null}sendServerFullMessage(e){const t={compression:p.Compression.NONE,data:{messageType:p.ServerClient.MessageType.SERVER_MESSAGE,serverMessage:{messageType:p.ServerMessage.MessageType.CONNECTION_DENIED,connectionDenied:{reason:p.ConnectionDenied.Reason.SERVER_FULL,serverFull:{maxPlayers:24}}}}},a=p.ServerClientMessage.encode(p.ServerClientMessage.fromObject(t)).finish();e.send(a,{binary:!0})}}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.Client=t.DECOMPRESSION_ERROR=t.AFK_TIMEOUT_COUNT=t.AFK_TIMEOUT=t.CONNECTION_TIMEOUT=void 0;var r=a(3),n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(r),d=a(0),s=a(11),o=a(4),i=a(1),p=a(13);const c=t.CONNECTION_TIMEOUT=1e4,y=t.AFK_TIMEOUT=1e4,l=t.AFK_TIMEOUT_COUNT=30,m=t.DECOMPRESSION_ERROR='Your message could not be decompressed';t.Client=class{constructor(e,t){this.id=e,this.ws=t,this.afkTimerCount=0,this.previousPlayerLocation=0,this.afkTimer=()=>{if(this.player){const e=this.player.playerData.slice(6,12).reduce((e,t)=>e+t,0);if(this.previousPlayerLocation!==e)return void(this.previousPlayerLocation=e);this.afkTimerCount++,this.afkTimerCount<l||(this.ws.close(),!1)}},this.id=e,this.ws=t,t.on('close',this.onDisconnect.bind(this)),t.on('message',this.onMessage.bind(this)),this.connectionTimeout=setTimeout(()=>{this.connectionTimeout=void 0,this.ws.close(),!1},c),this.afkTimeout=setInterval(this.afkTimer,y)}sendMessage(e){this.ws.send(e,{binary:!0})}sendPlayerReorder(e){const t={compression:p.Compression.NONE,data:{messageType:i.ServerClient.MessageType.SERVER_MESSAGE,serverMessage:{messageType:i.ServerMessage.MessageType.PLAYER_REORDER,playerReorder:{playerId:e}}}},a=i.ServerClientMessage.encode(i.ServerClientMessage.fromObject(t)).finish();this.sendMessage(a)}sendHandshake(){d.webSocketServer.sendHandshake(this)}onDisconnect(){d.webSocketServer.removePlayer(this.id),this.connectionTimeout&&clearTimeout(this.connectionTimeout),this.afkTimeout&&clearInterval(this.afkTimeout);const e=d.webSocketServer.clients.filter((e)=>e).length;console.info(`Active users: ${e}/24`)}async onMessage(e){const t=new Uint8Array(e),a=p.ClientServerMessage.decode(t);let r;try{switch(a.compression){case p.Compression.ZSTD:break;case p.Compression.GZIP:this.checkRequiredObjects(a.compressedData);const e=await new Promise((e,t)=>{n.gunzip(a.compressedData,(a,r)=>{a&&t(a),e(r)})});r=p.ClientServer.decode(e);break;default:r=a.data;}}catch(e){return void this.sendBadRequest(new o.ConnectionError(m,i.Error.ErrorType.BAD_REQUEST))}try{switch(this.checkRequiredObjects(r),r.messageType){case p.ClientServer.MessageType.HANDSHAKE:this.onHandshake(r);break;case p.ClientServer.MessageType.PING:this.onPing(t);break;case p.ClientServer.MessageType.PLAYER_UPDATE:this.onPlayerUpdate(r);break;case p.ClientServer.MessageType.PLAYER_DATA:this.onPlayerData(r);break;case p.ClientServer.MessageType.META_DATA:this.onMetaData(r);break;case p.ClientServer.MessageType.CHAT:this.onChatMessage(r);break;default:throw new o.ConnectionError('Message type unknown',i.Error.ErrorType.BAD_REQUEST);}}catch(e){if(Object.getPrototypeOf(o.ConnectionError).isPrototypeOf(e))return void this.sendBadRequest(e);throw e}}checkRequiredObjects(...e){for(const t of e)if(null==t)throw new o.ConnectionError('A required object is missing in the received message',i.Error.ErrorType.BAD_REQUEST)}onHandshake(e){try{let t=e.handshake;if(this.checkRequiredObjects(t),t=t,this.checkRequiredObjects(t.major,t.minor,t.characterId,t.username),this.isClientUsingWrongVersion(t))return void this.sendWrongVersionMessage();this.player=new s.Player(this,t.username,t.characterId),d.webSocketServer.addPlayer(this.player),this.sendHandshake()}catch(e){console.error(e)}}isClientUsingWrongVersion(e){return'1'!==e.major+''||'0'!==e.minor+''}sendWrongVersionMessage(){const e={compression:p.Compression.NONE,data:{messageType:i.ServerClient.MessageType.SERVER_MESSAGE,serverMessage:{messageType:i.ServerMessage.MessageType.CONNECTION_DENIED,connectionDenied:{reason:i.ConnectionDenied.Reason.WRONG_VERSION,wrongVersion:{majorVersion:1,minorVersion:0}}}}},t=i.ServerClientMessage.encode(i.ServerClientMessage.fromObject(e)).finish();this.sendMessage(t)}onPing(e){this.sendMessage(e)}onPlayerUpdate(e){if(null==this.player)return;const t=e.player;this.checkRequiredObjects(t);let a=!1;if(null!=t.characterId&&(this.player.characterId=t.characterId,a=!0),null!=t.username&&(this.player.username=t.username,a=!0),!!a){const e={compression:p.Compression.NONE,data:{messageType:i.ServerClient.MessageType.PLAYER_UPDATE,playerUpdate:{player:this.player,playerId:this.id}}},t=i.ServerClientMessage.encode(i.ServerClientMessage.fromObject(e)).finish();d.webSocketServer.broadcastMessage(t)}}onPlayerData(e){if(this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0),!!this.player){const t=e.playerData;this.checkRequiredObjects(t),this.checkRequiredObjects(t.dataLength,t.playerBytes),this.checkRequiredObjects(t.playerBytes[0]),this.checkRequiredObjects(t.playerBytes[0].playerData),t.playerBytes[0].playerData[3]!==this.id||(this.player.playerData=new Uint8Array(t.playerBytes[0].playerData))}}onMetaData(e){const t=e.metaData;this.checkRequiredObjects(t),this.checkRequiredObjects(t.metaData);for(const a of t.metaData)d.webSocketServer.addMeta(a)}onChatMessage(e){const t=e.chat;switch(this.checkRequiredObjects(t),this.checkRequiredObjects(t.message),t.chatType){case p.Chat.ChatType.GLOBAL:d.webSocketServer.onGlobalChatMessage(this,t.message);break;case p.Chat.ChatType.PRIVATE:this.checkRequiredObjects(t.private),this.checkRequiredObjects(t.private.receiverId),d.webSocketServer.onPrivateChatMessage(this,t.message,t.private.receiverId);break;case p.Chat.ChatType.COMMAND:this.checkRequiredObjects(t.command),this.checkRequiredObjects(t.command.arguments),d.webSocketServer.onCommandChatMessage(this,t.message,t.command.arguments);}}sendBadRequest(e){const t={compression:p.Compression.NONE,data:{messageType:i.ServerClient.MessageType.SERVER_MESSAGE,serverMessage:{messageType:i.ServerMessage.MessageType.ERROR,error:{errorType:e.errorType,message:e.message}}}},a=i.ServerClientMessage.encode(i.ServerClientMessage.fromObject(t)).finish();this.sendMessage(a)}sendInternalServerError(e){const t={compression:p.Compression.NONE,data:{messageType:i.ServerClient.MessageType.SERVER_MESSAGE,serverMessage:{messageType:i.ServerMessage.MessageType.ERROR,error:{errorType:i.Error.ErrorType.INTERNAL_SERVER_ERROR,message:e.message}}}},a=i.ServerClientMessage.encode(i.ServerClientMessage.fromObject(t)).finish();this.sendMessage(a)}}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.Player=void 0;var r=a(12),n=a(0);class d{constructor(e,t,a){this.client=e,this.username=t,this.characterId=a,this.playerData=Buffer.alloc(28),this.toJSON=this.toJSON}get playerData(){return this._playerData}set playerData(e){1===this.client.id&&(e[22]=n.webSocketServer.gameMode),this._playerData=e}get characterId(){return this._characterId}set characterId(e){this._characterId=e,this.characterName=r.Characters[this.characterId]}toJSON(){return{username:this.username,characterId:this._characterId}}}t.Player=d},function(e,t){'use strict';Object.defineProperty(t,'__esModule',{value:!0});var a=t.Characters=void 0;(function(e){e[e.Mario=0]='Mario',e[e.Luigi=1]='Luigi',e[e.Yoshi=2]='Yoshi',e[e.Wario=3]='Wario',e[e.Peach=4]='Peach',e[e.Toad=5]='Toad',e[e.Waluigi=6]='Waluigi',e[e.Rosalina=7]='Rosalina',e[e.Sonic=8]='Sonic',e[e.Goomba=9]='Goomba',e[e.Kirby=11]='Kirby'})(a||(t.Characters=a={}))},function(e,t,a){'use strict';var r=a(5),n=r.Reader,d=r.Writer,s=r.util,o=r.roots['default']||(r.roots['default']={});o.ClientServerMessage=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}e.prototype.compression=0,e.prototype.uncompressedSize=0,e.prototype.compressedData=s.newBuffer([]),e.prototype.data=null;var t;return Object.defineProperty(e.prototype,'message',{get:s.oneOfGetter(t=['compressedData','data']),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.compression&&e.hasOwnProperty('compression')&&t.uint32(8).int32(e.compression),null!=e.uncompressedSize&&e.hasOwnProperty('uncompressedSize')&&t.uint32(16).uint32(e.uncompressedSize),null!=e.compressedData&&e.hasOwnProperty('compressedData')&&t.uint32(26).bytes(e.compressedData),null!=e.data&&e.hasOwnProperty('data')&&o.ClientServer.encode(e.data,t.uint32(34).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ClientServerMessage,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.compression=e.int32();break;case 2:r.uncompressedSize=e.uint32();break;case 3:r.compressedData=e.bytes();break;case 4:r.data=o.ClientServer.decode(e,e.uint32());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';var t={};if(null!=e.compression&&e.hasOwnProperty('compression'))switch(e.compression){default:return'compression: enum value expected';case 0:case 1:case 2:}if(null!=e.uncompressedSize&&e.hasOwnProperty('uncompressedSize')&&!s.isInteger(e.uncompressedSize))return'uncompressedSize: integer expected';if(null!=e.compressedData&&e.hasOwnProperty('compressedData')&&(t.message=1,!(e.compressedData&&'number'==typeof e.compressedData.length||s.isString(e.compressedData))))return'compressedData: buffer expected';if(null!=e.data&&e.hasOwnProperty('data')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.ClientServer.verify(e.data);if(a)return'data.'+a}}return null},e.fromObject=function(e){if(e instanceof o.ClientServerMessage)return e;var t=new o.ClientServerMessage;switch(e.compression){case'NONE':case 0:t.compression=0;break;case'ZSTD':case 1:t.compression=1;break;case'GZIP':case 2:t.compression=2;}if(null!=e.uncompressedSize&&(t.uncompressedSize=e.uncompressedSize>>>0),null!=e.compressedData&&('string'==typeof e.compressedData?s.base64.decode(e.compressedData,t.compressedData=s.newBuffer(s.base64.length(e.compressedData)),0):e.compressedData.length&&(t.compressedData=e.compressedData)),null!=e.data){if('object'!=typeof e.data)throw TypeError('.ClientServerMessage.data: object expected');t.data=o.ClientServer.fromObject(e.data)}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.compression=t.enums===String?'NONE':0,a.uncompressedSize=0),null!=e.compression&&e.hasOwnProperty('compression')&&(a.compression=t.enums===String?o.Compression[e.compression]:e.compression),null!=e.uncompressedSize&&e.hasOwnProperty('uncompressedSize')&&(a.uncompressedSize=e.uncompressedSize),null!=e.compressedData&&e.hasOwnProperty('compressedData')&&(a.compressedData=t.bytes===String?s.base64.encode(e.compressedData,0,e.compressedData.length):t.bytes===Array?Array.prototype.slice.call(e.compressedData):e.compressedData,t.oneofs&&(a.message='compressedData')),null!=e.data&&e.hasOwnProperty('data')&&(a.data=o.ClientServer.toObject(e.data,t),t.oneofs&&(a.message='data')),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.ClientServer=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}e.prototype.messageType=0,e.prototype.handshake=null,e.prototype.ping=null,e.prototype.player=null,e.prototype.playerData=null,e.prototype.metaData=null,e.prototype.chat=null;var t;return Object.defineProperty(e.prototype,'message',{get:s.oneOfGetter(t=['handshake','ping','player','playerData','metaData','chat']),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.messageType&&e.hasOwnProperty('messageType')&&t.uint32(8).int32(e.messageType),null!=e.handshake&&e.hasOwnProperty('handshake')&&o.ClientHandshake.encode(e.handshake,t.uint32(18).fork()).ldelim(),null!=e.ping&&e.hasOwnProperty('ping')&&o.Ping.encode(e.ping,t.uint32(26).fork()).ldelim(),null!=e.player&&e.hasOwnProperty('player')&&o.Player.encode(e.player,t.uint32(50).fork()).ldelim(),null!=e.playerData&&e.hasOwnProperty('playerData')&&o.PlayerData.encode(e.playerData,t.uint32(1026).fork()).ldelim(),null!=e.metaData&&e.hasOwnProperty('metaData')&&o.MetaData.encode(e.metaData,t.uint32(1034).fork()).ldelim(),null!=e.chat&&e.hasOwnProperty('chat')&&o.Chat.encode(e.chat,t.uint32(1042).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ClientServer,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.messageType=e.int32();break;case 2:r.handshake=o.ClientHandshake.decode(e,e.uint32());break;case 3:r.ping=o.Ping.decode(e,e.uint32());break;case 6:r.player=o.Player.decode(e,e.uint32());break;case 128:r.playerData=o.PlayerData.decode(e,e.uint32());break;case 129:r.metaData=o.MetaData.decode(e,e.uint32());break;case 130:r.chat=o.Chat.decode(e,e.uint32());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';var t={};if(null!=e.messageType&&e.hasOwnProperty('messageType'))switch(e.messageType){default:return'messageType: enum value expected';case 0:case 2:case 3:case 6:case 128:case 129:case 130:}if(null!=e.handshake&&e.hasOwnProperty('handshake')){t.message=1;{var a=o.ClientHandshake.verify(e.handshake);if(a)return'handshake.'+a}}if(null!=e.ping&&e.hasOwnProperty('ping')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.Ping.verify(e.ping);if(a)return'ping.'+a}}if(null!=e.player&&e.hasOwnProperty('player')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.Player.verify(e.player);if(a)return'player.'+a}}if(null!=e.playerData&&e.hasOwnProperty('playerData')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.PlayerData.verify(e.playerData);if(a)return'playerData.'+a}}if(null!=e.metaData&&e.hasOwnProperty('metaData')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.MetaData.verify(e.metaData);if(a)return'metaData.'+a}}if(null!=e.chat&&e.hasOwnProperty('chat')){if(1===t.message)return'message: multiple values';t.message=1;{var a=o.Chat.verify(e.chat);if(a)return'chat.'+a}}return null},e.fromObject=function(e){if(e instanceof o.ClientServer)return e;var t=new o.ClientServer;switch(e.messageType){case'UNKNOWN':case 0:t.messageType=0;break;case'HANDSHAKE':case 2:t.messageType=2;break;case'PING':case 3:t.messageType=3;break;case'PLAYER_UPDATE':case 6:t.messageType=6;break;case'PLAYER_DATA':case 128:t.messageType=128;break;case'META_DATA':case 129:t.messageType=129;break;case'CHAT':case 130:t.messageType=130;}if(null!=e.handshake){if('object'!=typeof e.handshake)throw TypeError('.ClientServer.handshake: object expected');t.handshake=o.ClientHandshake.fromObject(e.handshake)}if(null!=e.ping){if('object'!=typeof e.ping)throw TypeError('.ClientServer.ping: object expected');t.ping=o.Ping.fromObject(e.ping)}if(null!=e.player){if('object'!=typeof e.player)throw TypeError('.ClientServer.player: object expected');t.player=o.Player.fromObject(e.player)}if(null!=e.playerData){if('object'!=typeof e.playerData)throw TypeError('.ClientServer.playerData: object expected');t.playerData=o.PlayerData.fromObject(e.playerData)}if(null!=e.metaData){if('object'!=typeof e.metaData)throw TypeError('.ClientServer.metaData: object expected');t.metaData=o.MetaData.fromObject(e.metaData)}if(null!=e.chat){if('object'!=typeof e.chat)throw TypeError('.ClientServer.chat: object expected');t.chat=o.Chat.fromObject(e.chat)}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.messageType=t.enums===String?'UNKNOWN':0),null!=e.messageType&&e.hasOwnProperty('messageType')&&(a.messageType=t.enums===String?o.ClientServer.MessageType[e.messageType]:e.messageType),null!=e.handshake&&e.hasOwnProperty('handshake')&&(a.handshake=o.ClientHandshake.toObject(e.handshake,t),t.oneofs&&(a.message='handshake')),null!=e.ping&&e.hasOwnProperty('ping')&&(a.ping=o.Ping.toObject(e.ping,t),t.oneofs&&(a.message='ping')),null!=e.player&&e.hasOwnProperty('player')&&(a.player=o.Player.toObject(e.player,t),t.oneofs&&(a.message='player')),null!=e.playerData&&e.hasOwnProperty('playerData')&&(a.playerData=o.PlayerData.toObject(e.playerData,t),t.oneofs&&(a.message='playerData')),null!=e.metaData&&e.hasOwnProperty('metaData')&&(a.metaData=o.MetaData.toObject(e.metaData,t),t.oneofs&&(a.message='metaData')),null!=e.chat&&e.hasOwnProperty('chat')&&(a.chat=o.Chat.toObject(e.chat,t),t.oneofs&&(a.message='chat')),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.MessageType=function(){var e={},t=Object.create(e);return t[e[0]='UNKNOWN']=0,t[e[2]='HANDSHAKE']=2,t[e[3]='PING']=3,t[e[6]='PLAYER_UPDATE']=6,t[e[128]='PLAYER_DATA']=128,t[e[129]='META_DATA']=129,t[e[130]='CHAT']=130,t}(),e}(),o.ClientHandshake=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.major=0,e.prototype.minor=0,e.prototype.characterId=0,e.prototype.username='',e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.major&&e.hasOwnProperty('major')&&t.uint32(8).uint32(e.major),null!=e.minor&&e.hasOwnProperty('minor')&&t.uint32(16).uint32(e.minor),null!=e.characterId&&e.hasOwnProperty('characterId')&&t.uint32(24).uint32(e.characterId),null!=e.username&&e.hasOwnProperty('username')&&t.uint32(34).string(e.username),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ClientHandshake,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.major=e.uint32();break;case 2:r.minor=e.uint32();break;case 3:r.characterId=e.uint32();break;case 4:r.username=e.string();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.major&&e.hasOwnProperty('major')&&!s.isInteger(e.major)?'major: integer expected':null!=e.minor&&e.hasOwnProperty('minor')&&!s.isInteger(e.minor)?'minor: integer expected':null!=e.characterId&&e.hasOwnProperty('characterId')&&!s.isInteger(e.characterId)?'characterId: integer expected':null!=e.username&&e.hasOwnProperty('username')&&!s.isString(e.username)?'username: string expected':null},e.fromObject=function(e){if(e instanceof o.ClientHandshake)return e;var t=new o.ClientHandshake;return null!=e.major&&(t.major=e.major>>>0),null!=e.minor&&(t.minor=e.minor>>>0),null!=e.characterId&&(t.characterId=e.characterId>>>0),null!=e.username&&(t.username=e.username+''),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.major=0,a.minor=0,a.characterId=0,a.username=''),null!=e.major&&e.hasOwnProperty('major')&&(a.major=e.major),null!=e.minor&&e.hasOwnProperty('minor')&&(a.minor=e.minor),null!=e.characterId&&e.hasOwnProperty('characterId')&&(a.characterId=e.characterId),null!=e.username&&e.hasOwnProperty('username')&&(a.username=e.username),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.Ping,d;e.pos<a;)switch(d=e.uint32(),d>>>3){default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null},e.fromObject=function(e){return e instanceof o.Ping?e:new o.Ping},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Player=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.username='',e.prototype.characterId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.username&&e.hasOwnProperty('username')&&t.uint32(10).string(e.username),null!=e.characterId&&e.hasOwnProperty('characterId')&&t.uint32(16).uint32(e.characterId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.Player,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.username=e.string();break;case 2:r.characterId=e.uint32();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.username&&e.hasOwnProperty('username')&&!s.isString(e.username)?'username: string expected':null!=e.characterId&&e.hasOwnProperty('characterId')&&!s.isInteger(e.characterId)?'characterId: integer expected':null},e.fromObject=function(e){if(e instanceof o.Player)return e;var t=new o.Player;return null!=e.username&&(t.username=e.username+''),null!=e.characterId&&(t.characterId=e.characterId>>>0),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.username='',a.characterId=0),null!=e.username&&e.hasOwnProperty('username')&&(a.username=e.username),null!=e.characterId&&e.hasOwnProperty('characterId')&&(a.characterId=e.characterId),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.PlayerData=function(){function e(e){if(this.playerBytes=[],e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.dataLength=0,e.prototype.playerBytes=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=d.create()),null!=e.dataLength&&e.hasOwnProperty('dataLength')&&t.uint32(8).uint32(e.dataLength),null!=e.playerBytes&&e.playerBytes.length)for(var a=0;a<e.playerBytes.length;++a)o.PlayerBytes.encode(e.playerBytes[a],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.PlayerData,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.dataLength=e.uint32();break;case 2:r.playerBytes&&r.playerBytes.length||(r.playerBytes=[]),r.playerBytes.push(o.PlayerBytes.decode(e,e.uint32()));break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.dataLength&&e.hasOwnProperty('dataLength')&&!s.isInteger(e.dataLength))return'dataLength: integer expected';if(null!=e.playerBytes&&e.hasOwnProperty('playerBytes')){if(!Array.isArray(e.playerBytes))return'playerBytes: array expected';for(var t=0,a;t<e.playerBytes.length;++t)if(a=o.PlayerBytes.verify(e.playerBytes[t]),a)return'playerBytes.'+a}return null},e.fromObject=function(e){if(e instanceof o.PlayerData)return e;var t=new o.PlayerData;if(null!=e.dataLength&&(t.dataLength=e.dataLength>>>0),e.playerBytes){if(!Array.isArray(e.playerBytes))throw TypeError('.PlayerData.playerBytes: array expected');t.playerBytes=[];for(var a=0;a<e.playerBytes.length;++a){if('object'!=typeof e.playerBytes[a])throw TypeError('.PlayerData.playerBytes: object expected');t.playerBytes[a]=o.PlayerBytes.fromObject(e.playerBytes[a])}}return t},e.toObject=function(e,t){t||(t={});var a={};if((t.arrays||t.defaults)&&(a.playerBytes=[]),t.defaults&&(a.dataLength=0),null!=e.dataLength&&e.hasOwnProperty('dataLength')&&(a.dataLength=e.dataLength),e.playerBytes&&e.playerBytes.length){a.playerBytes=[];for(var r=0;r<e.playerBytes.length;++r)a.playerBytes[r]=o.PlayerBytes.toObject(e.playerBytes[r],t)}return a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.PlayerBytes=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.playerId=0,e.prototype.playerData=s.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.playerId&&e.hasOwnProperty('playerId')&&t.uint32(8).uint32(e.playerId),null!=e.playerData&&e.hasOwnProperty('playerData')&&t.uint32(18).bytes(e.playerData),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.PlayerBytes,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.playerId=e.uint32();break;case 2:r.playerData=e.bytes();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.playerId&&e.hasOwnProperty('playerId')&&!s.isInteger(e.playerId)?'playerId: integer expected':null!=e.playerData&&e.hasOwnProperty('playerData')&&!(e.playerData&&'number'==typeof e.playerData.length||s.isString(e.playerData))?'playerData: buffer expected':null},e.fromObject=function(e){if(e instanceof o.PlayerBytes)return e;var t=new o.PlayerBytes;return null!=e.playerId&&(t.playerId=e.playerId>>>0),null!=e.playerData&&('string'==typeof e.playerData?s.base64.decode(e.playerData,t.playerData=s.newBuffer(s.base64.length(e.playerData)),0):e.playerData.length&&(t.playerData=e.playerData)),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.playerId=0,a.playerData=t.bytes===String?'':[]),null!=e.playerId&&e.hasOwnProperty('playerId')&&(a.playerId=e.playerId),null!=e.playerData&&e.hasOwnProperty('playerData')&&(a.playerData=t.bytes===String?s.base64.encode(e.playerData,0,e.playerData.length):t.bytes===Array?Array.prototype.slice.call(e.playerData):e.playerData),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Meta=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.length=0,e.prototype.address=0,e.prototype.data=s.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.length&&e.hasOwnProperty('length')&&t.uint32(8).uint32(e.length),null!=e.address&&e.hasOwnProperty('address')&&t.uint32(16).uint32(e.address),null!=e.data&&e.hasOwnProperty('data')&&t.uint32(26).bytes(e.data),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.Meta,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.length=e.uint32();break;case 2:r.address=e.uint32();break;case 3:r.data=e.bytes();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.length&&e.hasOwnProperty('length')&&!s.isInteger(e.length)?'length: integer expected':null!=e.address&&e.hasOwnProperty('address')&&!s.isInteger(e.address)?'address: integer expected':null!=e.data&&e.hasOwnProperty('data')&&!(e.data&&'number'==typeof e.data.length||s.isString(e.data))?'data: buffer expected':null},e.fromObject=function(e){if(e instanceof o.Meta)return e;var t=new o.Meta;return null!=e.length&&(t.length=e.length>>>0),null!=e.address&&(t.address=e.address>>>0),null!=e.data&&('string'==typeof e.data?s.base64.decode(e.data,t.data=s.newBuffer(s.base64.length(e.data)),0):e.data.length&&(t.data=e.data)),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.length=0,a.address=0,a.data=t.bytes===String?'':[]),null!=e.length&&e.hasOwnProperty('length')&&(a.length=e.length),null!=e.address&&e.hasOwnProperty('address')&&(a.address=e.address),null!=e.data&&e.hasOwnProperty('data')&&(a.data=t.bytes===String?s.base64.encode(e.data,0,e.data.length):t.bytes===Array?Array.prototype.slice.call(e.data):e.data),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.MetaData=function(){function e(e){if(this.metaData=[],e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.metaData=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=d.create()),null!=e.metaData&&e.metaData.length)for(var a=0;a<e.metaData.length;++a)o.Meta.encode(e.metaData[a],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.MetaData,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.metaData&&r.metaData.length||(r.metaData=[]),r.metaData.push(o.Meta.decode(e,e.uint32()));break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.metaData&&e.hasOwnProperty('metaData')){if(!Array.isArray(e.metaData))return'metaData: array expected';for(var t=0,a;t<e.metaData.length;++t)if(a=o.Meta.verify(e.metaData[t]),a)return'metaData.'+a}return null},e.fromObject=function(e){if(e instanceof o.MetaData)return e;var t=new o.MetaData;if(e.metaData){if(!Array.isArray(e.metaData))throw TypeError('.MetaData.metaData: array expected');t.metaData=[];for(var a=0;a<e.metaData.length;++a){if('object'!=typeof e.metaData[a])throw TypeError('.MetaData.metaData: object expected');t.metaData[a]=o.Meta.fromObject(e.metaData[a])}}return t},e.toObject=function(e,t){t||(t={});var a={};if((t.arrays||t.defaults)&&(a.metaData=[]),e.metaData&&e.metaData.length){a.metaData=[];for(var r=0;r<e.metaData.length;++r)a.metaData[r]=o.Meta.toObject(e.metaData[r],t)}return a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Chat=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}e.prototype.chatType=0,e.prototype.senderId=0,e.prototype.message='',e.prototype.global=null,e.prototype['private']=null,e.prototype.command=null;var t;return Object.defineProperty(e.prototype,'messageType',{get:s.oneOfGetter(t=['global','private','command']),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.chatType&&e.hasOwnProperty('chatType')&&t.uint32(8).int32(e.chatType),null!=e.senderId&&e.hasOwnProperty('senderId')&&t.uint32(16).uint32(e.senderId),null!=e.message&&e.hasOwnProperty('message')&&t.uint32(26).string(e.message),null!=e.global&&e.hasOwnProperty('global')&&o.ChatGlobal.encode(e.global,t.uint32(34).fork()).ldelim(),null!=e['private']&&e.hasOwnProperty('private')&&o.ChatPrivate.encode(e['private'],t.uint32(42).fork()).ldelim(),null!=e.command&&e.hasOwnProperty('command')&&o.ChatCommand.encode(e.command,t.uint32(2042).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.Chat,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.chatType=e.int32();break;case 2:r.senderId=e.uint32();break;case 3:r.message=e.string();break;case 4:r.global=o.ChatGlobal.decode(e,e.uint32());break;case 5:r['private']=o.ChatPrivate.decode(e,e.uint32());break;case 255:r.command=o.ChatCommand.decode(e,e.uint32());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';var t={};if(null!=e.chatType&&e.hasOwnProperty('chatType'))switch(e.chatType){default:return'chatType: enum value expected';case 0:case 1:case 255:}if(null!=e.senderId&&e.hasOwnProperty('senderId')&&!s.isInteger(e.senderId))return'senderId: integer expected';if(null!=e.message&&e.hasOwnProperty('message')&&!s.isString(e.message))return'message: string expected';if(null!=e.global&&e.hasOwnProperty('global')){t.messageType=1;{var a=o.ChatGlobal.verify(e.global);if(a)return'global.'+a}}if(null!=e['private']&&e.hasOwnProperty('private')){if(1===t.messageType)return'messageType: multiple values';t.messageType=1;{var a=o.ChatPrivate.verify(e['private']);if(a)return'private.'+a}}if(null!=e.command&&e.hasOwnProperty('command')){if(1===t.messageType)return'messageType: multiple values';t.messageType=1;{var a=o.ChatCommand.verify(e.command);if(a)return'command.'+a}}return null},e.fromObject=function(e){if(e instanceof o.Chat)return e;var t=new o.Chat;switch(e.chatType){case'GLOBAL':case 0:t.chatType=0;break;case'PRIVATE':case 1:t.chatType=1;break;case'COMMAND':case 255:t.chatType=255;}if(null!=e.senderId&&(t.senderId=e.senderId>>>0),null!=e.message&&(t.message=e.message+''),null!=e.global){if('object'!=typeof e.global)throw TypeError('.Chat.global: object expected');t.global=o.ChatGlobal.fromObject(e.global)}if(null!=e['private']){if('object'!=typeof e['private'])throw TypeError('.Chat.private: object expected');t['private']=o.ChatPrivate.fromObject(e['private'])}if(null!=e.command){if('object'!=typeof e.command)throw TypeError('.Chat.command: object expected');t.command=o.ChatCommand.fromObject(e.command)}return t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.chatType=t.enums===String?'GLOBAL':0,a.senderId=0,a.message=''),null!=e.chatType&&e.hasOwnProperty('chatType')&&(a.chatType=t.enums===String?o.Chat.ChatType[e.chatType]:e.chatType),null!=e.senderId&&e.hasOwnProperty('senderId')&&(a.senderId=e.senderId),null!=e.message&&e.hasOwnProperty('message')&&(a.message=e.message),null!=e.global&&e.hasOwnProperty('global')&&(a.global=o.ChatGlobal.toObject(e.global,t),t.oneofs&&(a.messageType='global')),null!=e['private']&&e.hasOwnProperty('private')&&(a['private']=o.ChatPrivate.toObject(e['private'],t),t.oneofs&&(a.messageType='private')),null!=e.command&&e.hasOwnProperty('command')&&(a.command=o.ChatCommand.toObject(e.command,t),t.oneofs&&(a.messageType='command')),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e.ChatType=function(){var e={},t=Object.create(e);return t[e[0]='GLOBAL']=0,t[e[1]='PRIVATE']=1,t[e[255]='COMMAND']=255,t}(),e}(),o.ChatGlobal=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ChatGlobal,d;e.pos<a;)switch(d=e.uint32(),d>>>3){default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null},e.fromObject=function(e){return e instanceof o.ChatGlobal?e:new o.ChatGlobal},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.ChatPrivate=function(){function e(e){if(e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.receiverId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=d.create()),null!=e.receiverId&&e.hasOwnProperty('receiverId')&&t.uint32(8).uint32(e.receiverId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ChatPrivate,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.receiverId=e.uint32();break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return'object'!=typeof e||null===e?'object expected':null!=e.receiverId&&e.hasOwnProperty('receiverId')&&!s.isInteger(e.receiverId)?'receiverId: integer expected':null},e.fromObject=function(e){if(e instanceof o.ChatPrivate)return e;var t=new o.ChatPrivate;return null!=e.receiverId&&(t.receiverId=e.receiverId>>>0),t},e.toObject=function(e,t){t||(t={});var a={};return t.defaults&&(a.receiverId=0),null!=e.receiverId&&e.hasOwnProperty('receiverId')&&(a.receiverId=e.receiverId),a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.ChatCommand=function(){function e(e){if(this.arguments=[],e)for(var t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.arguments=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=d.create()),null!=e.arguments&&e.arguments.length)for(var a=0;a<e.arguments.length;++a)t.uint32(10).string(e.arguments[a]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var a=void 0===t?e.len:e.pos+t,r=new o.ChatCommand,d;e.pos<a;)switch(d=e.uint32(),d>>>3){case 1:r.arguments&&r.arguments.length||(r.arguments=[]),r.arguments.push(e.string());break;default:e.skipType(7&d);}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if('object'!=typeof e||null===e)return'object expected';if(null!=e.arguments&&e.hasOwnProperty('arguments')){if(!Array.isArray(e.arguments))return'arguments: array expected';for(var t=0;t<e.arguments.length;++t)if(!s.isString(e.arguments[t]))return'arguments: string[] expected'}return null},e.fromObject=function(e){if(e instanceof o.ChatCommand)return e;var t=new o.ChatCommand;if(e.arguments){if(!Array.isArray(e.arguments))throw TypeError('.ChatCommand.arguments: array expected');t.arguments=[];for(var a=0;a<e.arguments.length;++a)t.arguments[a]=e.arguments[a]+''}return t},e.toObject=function(e,t){t||(t={});var a={};if((t.arrays||t.defaults)&&(a.arguments=[]),e.arguments&&e.arguments.length){a.arguments=[];for(var r=0;r<e.arguments.length;++r)a.arguments[r]=e.arguments[r]}return a},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),o.Compression=function(){var e={},t=Object.create(e);return t[e[0]='NONE']=0,t[e[1]='ZSTD']=1,t[e[2]='GZIP']=2,t}(),e.exports=o},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.MetaData=void 0;var r=a(15),n=function(e){return e&&e.__esModule?e:{default:e}}(r),d=a(6);t.MetaData=class{constructor(){this.metaData=new Map,this.alreadySent=[],this.generateMetaData=function*(){for(const[e,t]of this.metaData)yield t}}addIfNotAlreadySent(e){const t=n.default.hash32(''+e.address+e.length+e.data);this.alreadySent[t]||(this.metaData.set(t,e),this.alreadySent[t]=setTimeout(()=>{this.metaData.delete(t),delete this.alreadySent[t]},d.TIME_UNTIL_META_RESEND))}getMetaData(){const e=Array.from(this.generateMetaData());return this.metaData=new Map,e}}},function(e){e.exports=require('farmhash')},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.Command=t.GAMEMODE_NOT_ENOUGH_VOTES=t.GAMEMODE_ALREADY_RUNNING_MESSAGE=t.GAMEMODE_UNKNOWN_MESSAGE=t.NAN_MESSAGE=t.TOO_MANY_ARGS_MESSAGE=t.GAMEMODE_USAGE_MESSAGE=t.GAMEMODE_VOTE_STARTED=t.SECONDS_UNTIL_NEXT_GAMEMODE_VOTE=t.GAMEMODE_VOTE_TIME=void 0;var r=a(0),n=a(17),d=a(1);const s=t.GAMEMODE_VOTE_TIME=3e4,o=t.SECONDS_UNTIL_NEXT_GAMEMODE_VOTE=300,i=t.GAMEMODE_VOTE_STARTED='A vote to change gamemode has started. You have 1min to vote with /gamemode <gamemodeID>',p=t.GAMEMODE_USAGE_MESSAGE='**Usage:**\n\n/gamemode <gamemodeID>\n\n**Description:**\n\nYou can start a vote for a new gamemode once every 5min. Available gamemodes are:\n\nDEFAULT = 1\n\nTHIRD_PERSON_SHOOTER = 2\n\nINTERACTIONLESS = 3\n\nPROP_HUNT = 4\n\nBOSS_RUSH = 5\n\nTAG = 6\n\nWARIO_WARE = 8\n\n',c=t.TOO_MANY_ARGS_MESSAGE='Too many arguments. Please type "/gamemode" for a command description.',y=t.NAN_MESSAGE='The first argument must be a number.',l=t.GAMEMODE_UNKNOWN_MESSAGE='Gamemode unknown. Please type "/gamemode" for a list of available gamemodes.',m=t.GAMEMODE_ALREADY_RUNNING_MESSAGE='Gamemode is already running.',u=t.GAMEMODE_NOT_ENOUGH_VOTES='Gamemode vote passed with too few votes.';t.Command=class{constructor(e){this.enableGamemodeVote=e,this.votesInProgress={},this.changeGameMode=(e)=>{delete this.votesInProgress.gameMode,n.Vote.lastVotes.gameMode=Date.now(),r.webSocketServer.gameMode=e,r.webSocketServer.reorderPlayers();const t={compression:d.Compression.NONE,data:{messageType:d.ServerClient.MessageType.SERVER_MESSAGE,serverMessage:{messageType:d.ServerMessage.MessageType.GAME_MODE,gameMode:{gameMode:e}}}},a=d.ServerClientMessage.encode(d.ServerClientMessage.fromObject(t)).finish();r.webSocketServer.broadcastMessage(a),console.info(`Gamemode successfully changed to ${e}`)},this.sendTooFewGameModeVotes=()=>{const e={compression:d.Compression.NONE,data:{messageType:d.ServerClient.MessageType.CHAT,chat:{chatType:d.Chat.ChatType.COMMAND,message:u}}},t=d.ServerClientMessage.encode(d.ServerClientMessage.fromObject(e)).finish();r.webSocketServer.broadcastMessage(t)}}onGameModeCommand(e,t){if(this.enableGamemodeVote){if(0===t.length)return void this.sendUsageMessage(e);if(1<t.length)return void this.sendTooManyArgsMessage(e);const a=n.Vote.lastVotes.gameMode;if(a&&Date.now()-a<1e3*o)return void this.sendWaitMessage(e,a);if(isNaN(+t[0]))return void this.sendNaNMessage(e);const r=+t[0];return this.isSelectedGameModeWithinRange(r)?void this.sendGameModeUnknownMessage(e):this.isSelectedGameModeAlreadyRunning(r)?void this.sendGameModeAlreadyRunningMessage(e):void this.acceptGameModeVote(e,r)}}sendUsageMessage(e){const t={compression:d.Compression.NONE,data:{messageType:d.ServerClient.MessageType.CHAT,chat:{chatType:d.Chat.ChatType.COMMAND,message:p}}},a=d.ServerClientMessage.encode(d.ServerClientMessage.fromObject(t)).finish();e.sendMessage(a)}sendTooManyArgsMessage(e){const t={compression:d.Compression.NONE,data:{messageType:d.ServerClient.MessageType.CHAT,chat:{chatType:d.Chat.ChatType.COMMAND,message:c}}},a=d.ServerClientMessage.encode(d.ServerClientMessage.fromObject(t)).finish();e.sendMessage(a)}sendWaitMessage(e,t){var a=Math.trunc;const r=o-a((Date.now()-t)/1e3),n=`You must wait at least ${a(r/60)}min${0<r%60?`${r%60}s`:''} until you can start the next gamemode vote.`,s={compression:d.Compression.NONE,data:{messageType:d.ServerClient.MessageType.CHAT,chat:{chatType:d.Chat.ChatType.COMMAND,message:n}}},i=d.ServerClientMessage.encode(d.ServerClientMessage.fromObject(s)).finish();e.sendMessage(i)}sendNaNMessage(e){const t={compression:d.Compression.NONE,data:{messageType:d.ServerClient.MessageType.CHAT,chat:{chatType:d.Chat.ChatType.COMMAND,message:y}}},a=d.ServerClientMessage.encode(d.ServerClientMessage.fromObject(t)).finish();e.sendMessage(a)}isSelectedGameModeWithinRange(e){return 1>e||8<e||7===e}sendGameModeUnknownMessage(e){const t={compression:d.Compression.NONE,data:{messageType:d.ServerClient.MessageType.CHAT,chat:{chatType:d.Chat.ChatType.COMMAND,message:l}}},a=d.ServerClientMessage.encode(d.ServerClientMessage.fromObject(t)).finish();e.sendMessage(a)}isSelectedGameModeAlreadyRunning(e){return e===r.webSocketServer.gameMode}sendGameModeAlreadyRunningMessage(e){const t={compression:d.Compression.NONE,data:{messageType:d.ServerClient.MessageType.CHAT,chat:{chatType:d.Chat.ChatType.COMMAND,message:m}}},a=d.ServerClientMessage.encode(d.ServerClientMessage.fromObject(t)).finish();e.sendMessage(a)}acceptGameModeVote(e,t){let a=this.votesInProgress.gameMode;if(!a){a=new n.Vote(s,this.changeGameMode,this.sendTooFewGameModeVotes),this.votesInProgress.gameMode=a;const e={compression:d.Compression.NONE,data:{messageType:d.ServerClient.MessageType.CHAT,chat:{chatType:d.Chat.ChatType.COMMAND,message:i}}},t=d.ServerClientMessage.encode(d.ServerClientMessage.fromObject(e)).finish();r.webSocketServer.broadcastMessage(t)}a.acceptVote(e,t)}}},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.Vote=void 0;var r=a(0),n=a(1);class d{constructor(e,t,a){this.timeout=e,this.onSuccess=t,this.onReject=a,this.votes={},this.clientsAlreadyVoted=[],this.onVoteEnd=()=>{var e=Math.floor;let t=[],a=0;for(const[e,r]of Object.entries(this.votes)){const n=+e;r>a?(a=r,t=[n]):r===a&&t.push(n)}a>=e(r.webSocketServer.clients.length/2)?this.onSuccess(t[e(Math.random()*t.length)]):this.onReject()},this.timer=setTimeout(this.onVoteEnd,e)}acceptVote(e,t){const a=e.id;if(!this.clientsAlreadyVoted.includes(a)){const d={compression:n.Compression.NONE,data:{messageType:n.ServerClient.MessageType.CHAT,chat:{chatType:n.Chat.ChatType.COMMAND,message:'Vote accepted!'}}},s=n.ServerClientMessage.encode(n.ServerClientMessage.fromObject(d)).finish();e.sendMessage(s),this.clientsAlreadyVoted.push(a),this.votes[t]=(this.votes[t]||0)+1;const o=r.webSocketServer.clients.filter((e)=>e).length-this.clientsAlreadyVoted.length;0==o&&(this.onVoteEnd(),clearTimeout(this.timer))}}}t.Vote=d,d.lastVotes={}},function(e){e.exports=require('uws')},function(e,t,a){'use strict';Object.defineProperty(t,'__esModule',{value:!0}),t.WebHook=void 0;var r=a(2),n=function(e){return e&&e.__esModule?e:{default:e}}(r),d=a(0);Symbol('apiKey');t.WebHook=class{constructor({name:e,domain:t,description:a,port:r,apiKey:d},{ip:s,country:o,countryCode:i,latitude:p,longitude:c}){this.loop=async(e=!1)=>{try{const e=Object.assign({},this);e.toJSON=this.toJSON,await n.default.post('https://smmdb.ddns.net/api/net64server',e,{headers:this.apiKey?{Authorization:`APIKEY ${this.apiKey}`}:{}})}catch(e){e.response&&401===e.response.status&&console.error('Your API key seems to be wrong. Please check your settings!\nWebHook was disabled now')}setTimeout(this.loop,1e4)},this.version='2.0.0',this.ip=s,this.port=r,this.domain=t,this.name=e,this.description=a,this.country=o,this.countryCode=i,this.latitude=p,this.longitude=c,this.apiKey=d,this.loop(!0)}toJSON(){return Object.assign(this,{players:d.webSocketServer.players.filter((e)=>e),gameMode:d.webSocketServer.gameMode||0})}}}]);